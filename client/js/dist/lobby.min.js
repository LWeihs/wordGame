!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";const t=8,e=8;function i(t,e){!function(t,e){["input","keydown","keyup","mousedown","mouseup","select","contextmenu","drop"].forEach(i=>{t.addEventListener(i,(function(){e.test(this.value)?(this.oldValue=this.value,this.oldSelectionStart=this.selectionStart,this.oldSelectionEnd=this.selectionEnd):this.hasOwnProperty("oldValue")?(this.value=this.oldValue,this.setSelectionRange(this.oldSelectionStart,this.oldSelectionEnd)):this.value=""}))})}(t,new RegExp(`^.{0,${e}}$`))}const o=new class{constructor(){this._join_type="",this._new_room_info={private:!1}}initControls(){this._name_input=document.querySelector("#name-input-text"),i(this._name_input,t),this._room_input=document.querySelector("#room-input-text"),i(this._room_input,e),this._room_tag=document.querySelector("#room-tag"),this._room_input_form=document.querySelector("#room-input-form"),this._room_error=document.querySelector("#room-error"),this._room_error.display="none",this._join_private_toggle=document.querySelector("#join-private-toggle"),this._join_type_divs=document.querySelectorAll(".join-type-choice"),this._random_join_div=document.querySelector("#join-type-random"),this._specific_join_div=document.querySelector("#join-type-specific"),this._new_join_div=document.querySelector("#join-type-new"),this._join_type_divs.forEach(t=>{t.addEventListener("click",()=>{this._handleSelectionJoinTypeDiv(t)})}),this._handleSelectionJoinTypeDiv(this._join_type_divs[0]),this._join_private_toggle.addEventListener("click",()=>{this._switchPrivateSetting()}),this._game_join_button=document.querySelector("#game-join-button")}initSocket(t){this._game_join_button.addEventListener("click",()=>{this._attemptRedirectToGame(t)})}getInputUserName(){return this._name_input.value}displayErrorMessage(t){this._room_error.innerHTML=t,this._room_error.style.display=""}_switchStateBasedOnJoinType(){switch(this._join_type){case"random":this._switchStateToRandomJoin();break;case"specific":this._switchStateToSpecificJoin();break;case"new":this._switchStateToNewJoin()}}_switchStateToRandomJoin(){this._room_tag.style.display="none",this._room_input_form.style.display="none",this._room_error.style.display="none",this._join_private_toggle.style.display="none"}_switchStateToSpecificJoin(){this._room_tag.style.display="",this._room_input_form.style.display="",this._room_error.style.display="none",this._join_private_toggle.style.display="none"}_switchStateToNewJoin(){this._room_tag.style.display="",this._room_input_form.style.display="",this._room_error.style.display="none",this._join_private_toggle.style.display=""}_handleSelectionJoinTypeDiv(t){this._setJoinTypeDivActive(t),this._join_type_divs.forEach(e=>{e!==t&&this._setJoinTypeDivInactive(e)}),t===this._random_join_div?this._join_type="random":t===this._specific_join_div?this._join_type="specific":t===this._new_join_div&&(this._join_type="new"),this._switchStateBasedOnJoinType()}_switchPrivateSetting(){this._new_room_info.private=!this._new_room_info.private,this._new_room_info.private?this._checkDivWithCheckbox(this._join_private_toggle):this._uncheckDivWithCheckbox(this._join_private_toggle)}_setJoinTypeDivActive(t){const e=t.querySelector("i:first-child");e.classList.remove("far"),e.classList.add("fas")}_setJoinTypeDivInactive(t){const e=t.querySelector("i:first-child");e.classList.remove("fas"),e.classList.add("far")}_checkDivWithCheckbox(t){const e=t.querySelector("i:first-child");e.classList.remove("fa-square"),e.classList.add("fa-check-square")}_uncheckDivWithCheckbox(t){const e=t.querySelector("i:first-child");e.classList.remove("fa-check-square"),e.classList.add("fa-square")}_attemptRedirectToGame(t){const e={join_type:this._join_type,room:this._room_input.value,make_private:this._new_room_info.private};t.emit("attempt-redirect-to-game",e)}};window.addEventListener("load",(function(){document.querySelectorAll("form").forEach(t=>{t.addEventListener("submit",t=>{t.preventDefault()})}),o.initControls(),function(){const t=io({transports:["websocket"],upgrade:!1,query:"source=lobby"});o.initSocket(t),t.on("redirect-error",t=>{o.displayErrorMessage(t)}),t.on("permit-redirect",t=>{!function({room_name:t,make_private:e}){let i="game?room="+t;const n=o.getInputUserName();n&&(i+="&userName="+n);e&&(i+="&makePrivate=true");location.href=i}(t)})}()}))}));